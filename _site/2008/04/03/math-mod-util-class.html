<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Math Mod Util Class | Timwah 2.0</title>
    <link rel="stylesheet" href="/css/timwah_main.css" type="text/css" media="screen" charset="utf-8">  
    <link rel="stylesheet" href="/css/pygments_style.css" type="text/css" media="screen" charset="utf-8">
    <script type="text/javascript" src="http://use.typekit.com/rye8uvw.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  </head>
<body>
  <div id="main-container">
    
    <div id="main-content">
          <span class="post-title">Math Mod Util Class</span> <span class="post-date">/ 2008 Apr 03</span>
  <div class="post-content">
    <p>In most programming languages (or Actionscript at least), they use the computational definition of mod where it simply is the remainder of the first operand divided by the second. This works fine for n % m where n, m are elements of <b>N</b>. However, for -3 % 4, the computation looks something like this:</p>

<div class="highlight"><pre><code class="actionscript"><span class="k">for</span> <span class="nx">n</span> <span class="o">%</span> <span class="nx">m</span><span class="o">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="o">:</span>
<span class="o">-</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">=</span> <span class="o">-</span><span class="p">.</span><span class="mi">75</span>
<span class="o">-</span><span class="p">.</span><span class="mi">75</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>
<span class="nx">so</span> <span class="o">-</span><span class="mi">3</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>
</code></pre>
</div>


<p>The mathematical definition of mod says for n mod m, where n is an element of <b>Z</b>, and m is an element of <b>N</b>, the result of n mod m is in the range [ 0, m - 1 ]. So -3 mod 4 = 1. This is a simple fix for Flash's % operator. The code below is in AS2, but the AS3 version is essentially the same (maybe you would ensure n, m are ints):</p>

<div class="highlight"><pre><code class="actionscript"><span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">mod</span><span class="p">(</span><span class="nx">n</span><span class="o">:</span><span class="nb">Number</span><span class="o">,</span> <span class="nx">m</span><span class="o">:</span><span class="nb">Number</span><span class="p">)</span><span class="o">:</span><span class="nb">Number</span>
<span class="p">{</span>
    <span class="k">var</span> <span class="nx">tmp</span><span class="o">:</span><span class="nb">Number</span> <span class="o">=</span> <span class="nx">n</span> <span class="o">%</span> <span class="nx">m</span><span class="o">;</span>
    <span class="k">return</span> <span class="nx">tmp</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">tmp</span> <span class="o">+</span> <span class="nx">m</span> <span class="o">:</span> <span class="nx">tmp</span><span class="o">;</span>
<span class="p">}</span>
</code></pre>
</div>


<p>This is great for implementing a circular array, say for a nav where you can press left + right keys and when you get to the first element and press left, you go to the last nav element ( n - 1 if n is the length ). So for your leftKeyHandler function you can just do something like this instead of checking if index == -1, index = length - 1:</p>

<div class="highlight"><pre><code class="actionscript"><span class="kd">function</span> <span class="nx">leftKeyHandler</span><span class="p">()</span><span class="o">:</span><span class="kc">Void</span>
<span class="p">{</span>
    <span class="nx">selectNav</span><span class="p">(</span><span class="nx">MathUtil</span><span class="p">.</span><span class="nx">mod</span><span class="p">(</span><span class="o">--</span><span class="nx">index</span><span class="o">,</span> <span class="nx">navElements</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span> 
<span class="p">}</span>
</code></pre>
</div>


  </div>
  
  <div id="related">
      <h2>Related Posts</h2>
      <ul class="posts">
        
            <li><a href="/2010/02/10/and-now-jekyll.html">And Now Jekyll</a> <span class="post-list-date">/ 2010 Feb 10</span></li>
        
            <li><a href="/2009/10/09/smart-buffering-for-progressive-video.html">Smart Buffering For Progressive Video</a> <span class="post-list-date">/ 2009 Oct 09</span></li>
        
            <li><a href="/2009/03/24/generating-eclipse-themes-and-sharing-configs.html">Generating Eclipse Themes and Sharing Configs</a> <span class="post-list-date">/ 2009 Mar 24</span></li>
        
      </ul>
    </div>

    <script type="text/javascript" charset="utf-8">
        if (window.location.href.indexOf('localhost') != -1 ||
            window.location.href.indexOf('file') != -1)
        {
          var disqus_developer = 1;
        }
        
    </script>

    <div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/timwah/embed.js"></script><noscript><a href="http://disqus.com/forums/timwah/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    

  <script type="text/javascript">
  //<![CDATA[
  (function() {
   var links = document.getElementsByTagName('a');
   var query = '?';
   for(var i = 0; i < links.length; i++) {
   if(links[i].href.indexOf('#disqus_thread') >= 0) {
     query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
   }
   }
   document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/timwah/get_num_replies.js' + query + '"></' + 'script>');
  })();
  //]]>
  </script>
      <div id="ad-container">
        <script type="text/javascript"><!--
        google_ad_client = "pub-0544704656740409";
        /* ee blog */
        google_ad_slot = "3105365837";
        google_ad_width = 900;
        google_ad_height = 15;
        //-->
        </script>
        <script type="text/javascript"
        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
        </script>
      </div>
    </div>
    
    <div id="main-sidebar">
      <h2><a href="/index.html">Timwah 2.0</a></h2>
      <ul id="sidebar-menu">
        <li><a href="/about.html">About</a></li>
        <li><a href="http://work.timrobles.com">Portfolio</a></li>
        <li><a href="http://github.com/roblocop/">Github</a></li>
        <li><a href="http://www.linkedin.com/in/timrobles">LinkedIn</a></li>
      </ul>
      <h2>Friends</h2>      
      <ul id="sidebar-menu">
        <li><a href="http://anttikupila.com">Antti Kupila</a></li>
        <li><a href="http://petercole.com">Peter Cole</a></li>
        <li><a href="http://bigevilempire.com">Ronnie Liew</a></li>        
        <li><a href="http://toreholmberg.se">Tore Holmberg</a></li>
      </ul>
    </div>
    
  </div>
</body>
</html>